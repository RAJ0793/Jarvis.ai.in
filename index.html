<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Jarvis: Welcome</title>
  <style>
    *{margin:0;padding:0;box-sizing:border-box;}
    body,html{background:#00c3ff;height:100%;font-family:'Arial',sans-serif;overflow:hidden;}

    /* === WELCOME SCREEN === */
    #welcomeScreen{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);opacity:1;transition:opacity 2s ease-out;position:relative;}
    #welcomeScreen.hidden{opacity:0;pointer-events:none;}

    .container{text-align:center;padding:2.8em;background:rgba(255,255,255,0.1);backdrop-filter:blur(10px);border-radius:20px;border:1px solid rgba(255,255,255,0.2);box-shadow:0 8px 32px rgba(31,38,135,0.37);max-width:800px;width:90%;}

    svg.jarvis-logo text{font-size:100px;font-weight:bold;fill:none;stroke:white;stroke-width:3;stroke-dasharray:700;stroke-dashoffset:700;opacity:0;}
    .draw-animation svg.jarvis-logo text{animation:drawText 3s ease forwards;opacity:1;}
    @keyframes drawText{to{stroke-dashoffset:0;}}

    .title{color:white;font-size:2.5rem;margin-bottom:1rem;opacity:0;}
    .title.show{animation:fadeInUp 1s ease-out forwards;}

    .subtitle{color:rgb(249,229,4);font-size:1.2rem;margin-bottom:2rem;opacity:0;}
    .subtitle.show{animation:fadeInUp 1s ease-out forwards;}

    @keyframes fadeInUp{from{opacity:0;transform:translateY(50px);}to{opacity:1;transform:translateY(0);}}

    /* === PAGE LOADER === */
    #pageLoader{position:fixed;inset:0;background:#0d1117;display:none;flex-direction:column;justify-content:center;align-items:center;z-index:9999;opacity:1;transition:opacity 2s ease-out;}
    #pageLoader.hidden{opacity:0;pointer-events:none;}

    #continueBtn{border:none;border-radius:8px;color:#fff;cursor:pointer;background:linear-gradient(270deg,#ff004c,#ffb600,#00ff6a,#00c3ff,#7a00ff);background-size:400% 400%;animation:rainbow 5s linear infinite;opacity:0;transition:opacity 0.8s ease-in;padding:10px 20px;font-size:16px;}
    #continueBtn.show{opacity:1;}
    @keyframes rainbow{0%{background-position:0% 50%;}50%{background-position:100% 50%;}100%{background-position:0% 50%;}}

    /* Loading indicator for audio */
    .audio-status{color:rgba(255,255,255,0.6);font-size:0.9rem;margin-top:1rem;display:none;}
    .audio-status.show{display:block;}
  </style>
</head>

<body>

  <!-- ðŸ”Š Lambo Sound - Preloaded in background thread -->
  <!-- 
    GITHUB PAGES SETUP:
    1. Place Lambo.mp3 in the same directory as this HTML file
    2. Or create an 'assets' folder and update src to "assets/Lambo.mp3"
    3. Ensure the mp3 file is committed to your repository
    4. File size should be under 100MB (GitHub limit)
  -->
  <audio id="lamboSound" preload="auto" style="display:none;">
    <source src="Lambo.mp3" type="audio/mpeg">
    Your browser does not support the audio element.
  </audio>

  <!-- WELCOME SCREEN -->
  <div id="welcomeScreen">
    <div class="container">
      <h1 class="title" id="welcomeText">Welcome to</h1>
      <p class="subtitle" id="subText">Your all in one smart Ai agent or assistant</p>
      <div class="logo-container" id="logoContainer">
        <svg class="jarvis-logo" viewBox="0 0 600 150" xmlns="http://www.w3.org/2000/svg">
          <text x="100" y="100">JARVIS</text>
        </svg>
      </div>
      <div id="audioStatus" class="audio-status">Loading audio...</div>
    </div>
  </div>

  <!-- PAGE LOADER -->
  <div id="pageLoader">
    <button id="continueBtn" onclick="goToMain()">Continue</button>
  </div>

  <script>
    const sound = document.getElementById('lamboSound');
    const audioStatus = document.getElementById('audioStatus');

    const welcome=document.getElementById("welcomeText"),
          subtitle=document.getElementById("subText"),
          logoContainer=document.getElementById("logoContainer"),
          welcomeScreen=document.getElementById("welcomeScreen"),
          loader=document.getElementById("pageLoader"),
          btn=document.getElementById("continueBtn");

    let audioLoaded = false;
    let userInteracted = false;

    // Monitor audio loading status
    sound.addEventListener('loadeddata', function() {
      audioLoaded = true;
      console.log('âœ… Audio loaded successfully');
      if(audioStatus) audioStatus.textContent = 'Audio ready';
    });

    sound.addEventListener('canplaythrough', function() {
      console.log('âœ… Audio can play through without interruption');
    });

    sound.addEventListener('error', function(e) {
      console.error('âŒ Audio loading error:', e);
      if(audioStatus) {
        audioStatus.textContent = 'Audio loading failed (will continue without sound)';
        audioStatus.style.color = 'rgba(255,100,100,0.8)';
      }
    });

    // Preload audio immediately when page loads (background thread)
    sound.load();

    // Welcome animations
    setTimeout(()=>welcome.classList.add("show"),200);
    setTimeout(()=>logoContainer.classList.add("draw-animation"),1600);
    setTimeout(()=>{
      subtitle.classList.add("show");
      audioStatus.classList.add("show");
    },3000);

    // After Welcome -> Show Loader + Play Sound
    setTimeout(()=>{
      welcomeScreen.classList.add("hidden");

      setTimeout(()=>{
        welcomeScreen.style.display="none";
        loader.style.display="flex";

        // ðŸ”Š START LAMBO SOUND (only if loaded and user interacted)
        playAudioSafely();

        // Show button after 4s
        setTimeout(()=>{
          btn.classList.add("show");
        },4000);

        // Auto redirect after 10s
        setTimeout(goToMain,10000);

      },2000);

    },8000);

    function playAudioSafely() {
      if (!audioLoaded) {
        console.warn('âš ï¸ Audio not yet loaded, skipping playback');
        return;
      }

      sound.currentTime = 0;
      const playPromise = sound.play();
      
      if (playPromise !== undefined) {
        playPromise
          .then(() => {
            console.log('ðŸ”Š Audio playing successfully');
          })
          .catch(error => {
            console.warn('âš ï¸ Autoplay prevented by browser:', error);
            console.log('ðŸ’¡ Audio will play on user interaction');
          });
      }
    }

    function goToMain(){
      // ðŸ”‡ STOP SOUND WHEN LEAVING
      if (sound && !sound.paused) {
        sound.pause();
        sound.currentTime = 0;
      }

      loader.classList.add("hidden");
      setTimeout(()=>{
        // For GitHub Pages: update this to your main page filename
        window.location.href="main.html";
      },2000);
    }

    // Enable audio on first user interaction (for mobile/autoplay policy)
    function enableAudio() {
      if (!userInteracted) {
        userInteracted = true;
        // Try to play a tiny bit of audio to unlock it
        sound.volume = 0.01;
        sound.play().then(() => {
          sound.pause();
          sound.currentTime = 0;
          sound.volume = 1;
        }).catch(()=>{});
      }
    }

    // Handle first user interaction for mobile autoplay
    document.addEventListener('click', enableAudio, { once: true });
    document.addEventListener('touchstart', enableAudio, { once: true });

    // Escape key to skip
    document.addEventListener("keydown",e=>{
      if(e.key==="Escape") goToMain();
    });

    // Visibility change handling (pause audio if tab not visible)
    document.addEventListener('visibilitychange', function() {
      if (document.hidden && sound && !sound.paused) {
        sound.pause();
      }
    });
  </script>

</body>
</html>
